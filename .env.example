# Dojo Manager Environment Configuration
# Copy this file to .env and customize as needed
# All variables are prefixed with DOJO_

# ===========================================
# Application
# ===========================================

# Application environment: development, staging, production, testing
DOJO_ENVIRONMENT=development

# Enable debug mode (verbose logging, detailed errors)
DOJO_DEBUG=false

# ===========================================
# API Server
# ===========================================

# Host to bind API server to (use 127.0.0.1 for local-only access)
DOJO_API_HOST=0.0.0.0

# Port for API server
DOJO_API_PORT=8000

# Number of worker processes (set to number of CPU cores for production)
DOJO_API_WORKERS=1

# Auto-reload on code changes (development only, never in production)
DOJO_API_RELOAD=false

# ===========================================
# Model & Inference
# ===========================================

# Path to trained model file
# DOJO_MODEL_PATH=/app/models/saenchai_v1.pt

# Device for inference: auto, cpu, cuda, rocm
DOJO_MODEL_DEVICE=auto

# ===========================================
# Logging
# ===========================================

# Minimum log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
DOJO_LOG_LEVEL=INFO

# Log format: json (production), console (development), auto (based on environment)
DOJO_LOG_FORMAT=auto

# Path to log file (optional, logs to stdout if not set)
# DOJO_LOG_FILE=/var/log/dojo-manager/app.log

# ===========================================
# Timeouts & Limits
# ===========================================

# Request timeout in seconds
DOJO_REQUEST_TIMEOUT=30

# Maximum request body size in bytes (default: 100MB)
DOJO_MAX_REQUEST_SIZE=104857600

# Graceful shutdown timeout in seconds
DOJO_SHUTDOWN_TIMEOUT=30

# ===========================================
# GPU / Hardware
# ===========================================

# Fraction of GPU memory to use (0.1 to 1.0)
DOJO_GPU_MEMORY_FRACTION=0.9

# ROCm GPU architecture (for AMD GPUs)
# Examples: gfx1100 (RDNA3), gfx1030 (RDNA2), gfx90a (MI200)
# DOJO_ROCM_ARCH=gfx1100

# ===========================================
# Feature Flags
# ===========================================

# Enable Prometheus metrics endpoint at /metrics
DOJO_ENABLE_METRICS=true

# Enable OpenTelemetry distributed tracing
DOJO_ENABLE_TRACING=false

# ===========================================
# Security & Authentication
DOJO_AUTH_ENABLED=true
DOJO_API_KEYS_FILE=/run/secrets/dojo_api_keys
# Generate keys with: openssl rand -hex 32
# Store in production secrets management system
DOJO_JWT_SECRET_KEY=YOUR_SECRET_KEY_HERE
DOJO_JWT_ALGORITHM=HS256
DOJO_JWT_EXPIRY_HOURS=2

# CORS Configuration
DOJO_CORS_ORIGINS='["https://yourdomain.com"]'

# Production flags
DOJO_DEBUG=false
DOJO_API_RELOAD=false

# ===========================================
# Rate Limiting
# ===========================================

# Enable rate limiting
DOJO_RATE_LIMIT_ENABLED=true

# Maximum requests per time window
DOJO_RATE_LIMIT_REQUESTS=100

# Rate limit time window in seconds
DOJO_RATE_LIMIT_WINDOW=60

# Burst allowance above normal rate
DOJO_RATE_LIMIT_BURST=20

# ===========================================
# CORS
# ===========================================

# Comma-separated list of allowed origins (empty = none in production)
# Use * for all origins (not recommended for production)
# DOJO_CORS_ORIGINS=https://app.example.com,https://admin.example.com
DOJO_CORS_ORIGINS=

# Allow credentials in CORS requests
DOJO_CORS_ALLOW_CREDENTIALS=false
